<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 680" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#38bdf8"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a"/>
    </marker>
    <marker id="arrow-amber" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc2626"/>
    </marker>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="680" rx="12" fill="#0f172a"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="700">How Attractor Works</text>
  <text x="450" y="58" text-anchor="middle" fill="#94a3b8" font-size="13">You orchestrate the plan — the engine executes it</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- TOP SECTION: Planning Phase                     -->
  <!-- ═══════════════════════════════════════════════ -->

  <!-- Planning phase container -->
  <rect x="30" y="76" width="840" height="260" rx="10" fill="#1e293b" stroke="#38bdf8" stroke-width="1.5" stroke-dasharray="6,3" filter="url(#shadow)"/>
  <text x="450" y="98" text-anchor="middle" fill="#38bdf8" font-size="14" font-weight="600">PLANNING PHASE — You + Claude</text>

  <!-- Step 1: PRD -->
  <rect x="55" y="115" width="170" height="90" rx="8" fill="#0c4a6e" stroke="#0ea5e9" stroke-width="1"/>
  <text x="140" y="138" text-anchor="middle" fill="#7dd3fc" font-size="11" font-weight="600">STEP 1</text>
  <text x="140" y="158" text-anchor="middle" fill="#e0f2fe" font-size="13" font-weight="500">Craft PRD</text>
  <text x="140" y="176" text-anchor="middle" fill="#7dd3fc" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">attractor plan</text>
  <text x="140" y="194" text-anchor="middle" fill="#94a3b8" font-size="10">You + Claude define goals</text>

  <!-- Arrow 1→2 -->
  <line x1="229" y1="160" x2="268" y2="160" stroke="#38bdf8" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- Step 2: Spec -->
  <rect x="274" y="115" width="170" height="90" rx="8" fill="#0c4a6e" stroke="#0ea5e9" stroke-width="1"/>
  <text x="359" y="138" text-anchor="middle" fill="#7dd3fc" font-size="11" font-weight="600">STEP 2</text>
  <text x="359" y="158" text-anchor="middle" fill="#e0f2fe" font-size="13" font-weight="500">Craft Spec</text>
  <text x="359" y="176" text-anchor="middle" fill="#7dd3fc" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">attractor plan --spec</text>
  <text x="359" y="194" text-anchor="middle" fill="#94a3b8" font-size="10">You + Claude detail the how</text>

  <!-- Arrow 2→3 -->
  <line x1="448" y1="160" x2="487" y2="160" stroke="#38bdf8" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- Step 3: Decompose -->
  <rect x="493" y="115" width="170" height="90" rx="8" fill="#451a03" stroke="#f59e0b" stroke-width="1"/>
  <text x="578" y="138" text-anchor="middle" fill="#fcd34d" font-size="11" font-weight="600">STEP 3</text>
  <text x="578" y="158" text-anchor="middle" fill="#fef3c7" font-size="13" font-weight="500">Decompose</text>
  <text x="578" y="176" text-anchor="middle" fill="#fcd34d" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">attractor decompose</text>
  <text x="578" y="194" text-anchor="middle" fill="#94a3b8" font-size="10">Spec → beads tickets</text>

  <!-- Arrow 3→4 -->
  <line x1="667" y1="160" x2="706" y2="160" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>

  <!-- Step 4: Scaffold Pipeline -->
  <rect x="712" y="115" width="140" height="90" rx="8" fill="#0c4a6e" stroke="#0ea5e9" stroke-width="1"/>
  <text x="782" y="138" text-anchor="middle" fill="#7dd3fc" font-size="11" font-weight="600">STEP 4</text>
  <text x="782" y="158" text-anchor="middle" fill="#e0f2fe" font-size="13" font-weight="500">Scaffold Pipeline</text>
  <text x="782" y="176" text-anchor="middle" fill="#7dd3fc" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">attractor scaffold</text>
  <text x="782" y="194" text-anchor="middle" fill="#94a3b8" font-size="10">You + Claude build DOT</text>

  <!-- Artifacts row -->
  <text x="140" y="232" text-anchor="middle" fill="#64748b" font-size="10" font-weight="600">PRODUCES</text>
  <rect x="75" y="240" width="130" height="28" rx="5" fill="#172554" stroke="#3b82f6" stroke-width="1"/>
  <text x="140" y="259" text-anchor="middle" fill="#93c5fd" font-size="11" font-family="'SF Mono', 'Fira Code', monospace">prd.md</text>

  <text x="359" y="232" text-anchor="middle" fill="#64748b" font-size="10" font-weight="600">PRODUCES</text>
  <rect x="294" y="240" width="130" height="28" rx="5" fill="#172554" stroke="#3b82f6" stroke-width="1"/>
  <text x="359" y="259" text-anchor="middle" fill="#93c5fd" font-size="11" font-family="'SF Mono', 'Fira Code', monospace">spec.md</text>

  <text x="578" y="232" text-anchor="middle" fill="#64748b" font-size="10" font-weight="600">PRODUCES</text>
  <rect x="513" y="240" width="130" height="28" rx="5" fill="#422006" stroke="#f59e0b" stroke-width="1"/>
  <text x="578" y="259" text-anchor="middle" fill="#fcd34d" font-size="11" font-family="'SF Mono', 'Fira Code', monospace">beads epic+tasks</text>

  <text x="782" y="232" text-anchor="middle" fill="#64748b" font-size="10" font-weight="600">PRODUCES</text>
  <rect x="717" y="240" width="130" height="28" rx="5" fill="#172554" stroke="#3b82f6" stroke-width="1"/>
  <text x="782" y="259" text-anchor="middle" fill="#93c5fd" font-size="11" font-family="'SF Mono', 'Fira Code', monospace">pipeline.dot</text>

  <!-- Role indicators -->
  <rect x="55" y="280" width="50" height="18" rx="4" fill="#164e63"/>
  <text x="80" y="293" text-anchor="middle" fill="#67e8f9" font-size="9">You</text>
  <rect x="110" y="280" width="55" height="18" rx="4" fill="#312e81"/>
  <text x="137" y="293" text-anchor="middle" fill="#c4b5fd" font-size="9">Claude</text>

  <rect x="274" y="280" width="50" height="18" rx="4" fill="#164e63"/>
  <text x="299" y="293" text-anchor="middle" fill="#67e8f9" font-size="9">You</text>
  <rect x="329" y="280" width="55" height="18" rx="4" fill="#312e81"/>
  <text x="356" y="293" text-anchor="middle" fill="#c4b5fd" font-size="9">Claude</text>

  <rect x="530" y="280" width="96" height="18" rx="4" fill="#78350f"/>
  <text x="578" y="293" text-anchor="middle" fill="#fde68a" font-size="9">Attractor CLI</text>

  <rect x="712" y="280" width="50" height="18" rx="4" fill="#164e63"/>
  <text x="737" y="293" text-anchor="middle" fill="#67e8f9" font-size="9">You</text>
  <rect x="767" y="280" width="55" height="18" rx="4" fill="#312e81"/>
  <text x="794" y="293" text-anchor="middle" fill="#c4b5fd" font-size="9">Claude</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- Arrow from planning to execution               -->
  <!-- ═══════════════════════════════════════════════ -->
  <line x1="450" y1="340" x2="450" y2="370" stroke="#16a34a" stroke-width="2.5" marker-end="url(#arrow-green)"/>
  <text x="465" y="358" fill="#4ade80" font-size="11" font-weight="600">attractor run</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- BOTTOM SECTION: Execution Phase                 -->
  <!-- ═══════════════════════════════════════════════ -->

  <!-- Engine container -->
  <rect x="120" y="376" width="660" height="230" rx="10" fill="#1e293b" stroke="#6366f1" stroke-width="1.5" stroke-dasharray="6,3" filter="url(#shadow)"/>
  <text x="450" y="398" text-anchor="middle" fill="#a78bfa" font-size="14" font-weight="600">EXECUTION PHASE — Attractor Engine</text>

  <!-- Phase boxes in a horizontal flow -->
  <!-- Validate -->
  <rect x="145" y="415" width="120" height="60" rx="6" fill="#312e81" stroke="#6366f1" stroke-width="1"/>
  <text x="205" y="436" text-anchor="middle" fill="#c4b5fd" font-size="10" font-weight="600">VALIDATE</text>
  <text x="205" y="453" text-anchor="middle" fill="#e0e7ff" font-size="11">12 lint rules</text>
  <text x="205" y="466" text-anchor="middle" fill="#a5b4fc" font-size="10">before any LLM call</text>

  <!-- Arrow -->
  <line x1="269" y1="445" x2="294" y2="445" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Execute -->
  <rect x="300" y="415" width="120" height="60" rx="6" fill="#1a2332" stroke="#334155" stroke-width="1"/>
  <text x="360" y="436" text-anchor="middle" fill="#94a3b8" font-size="10" font-weight="600">EXECUTE NODE</text>
  <text x="360" y="453" text-anchor="middle" fill="#e2e8f0" font-size="11">Claude Code</text>
  <text x="360" y="466" text-anchor="middle" fill="#64748b" font-size="10">full agent loop</text>

  <!-- Arrow -->
  <line x1="424" y1="445" x2="449" y2="445" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Verify -->
  <rect x="455" y="415" width="120" height="60" rx="6" fill="#14532d" stroke="#16a34a" stroke-width="1"/>
  <text x="515" y="436" text-anchor="middle" fill="#86efac" font-size="10" font-weight="600">VERIFY</text>
  <text x="515" y="453" text-anchor="middle" fill="#dcfce7" font-size="11">Goal gates</text>
  <text x="515" y="466" text-anchor="middle" fill="#4ade80" font-size="10">schema + routing</text>

  <!-- Arrow -->
  <line x1="579" y1="445" x2="604" y2="445" stroke="#16a34a" stroke-width="1.5" marker-end="url(#arrow-green)"/>

  <!-- Route -->
  <rect x="610" y="415" width="120" height="60" rx="6" fill="#1a2332" stroke="#334155" stroke-width="1"/>
  <text x="670" y="436" text-anchor="middle" fill="#94a3b8" font-size="10" font-weight="600">ROUTE</text>
  <text x="670" y="453" text-anchor="middle" fill="#e2e8f0" font-size="11">Next node or exit</text>
  <text x="670" y="466" text-anchor="middle" fill="#64748b" font-size="10">edge selection</text>

  <!-- Retry loop arrow (verify back to execute) -->
  <path d="M 455 478 L 425 500 L 340 500 L 340 479" stroke="#dc2626" stroke-width="1.5" fill="none" marker-end="url(#arrow-red)" stroke-dasharray="5,3"/>
  <text x="390" y="515" text-anchor="middle" fill="#f87171" font-size="10">retry on fail</text>

  <!-- Next node loop arrow (route back to execute) -->
  <path d="M 670 479 L 670 540 L 360 540 L 360 479" stroke="#64748b" stroke-width="1.5" fill="none" marker-end="url(#arrow)" stroke-dasharray="5,3"/>
  <text x="515" y="555" text-anchor="middle" fill="#94a3b8" font-size="10">next node</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- BOTTOM: Output                                  -->
  <!-- ═══════════════════════════════════════════════ -->
  <rect x="30" y="620" width="840" height="46" rx="8" fill="#14532d" stroke="#16a34a" stroke-width="1"/>
  <text x="450" y="640" text-anchor="middle" fill="#4ade80" font-size="14" font-weight="600">OUTPUT</text>
  <text x="450" y="656" text-anchor="middle" fill="#86efac" font-size="12">Verified code  +  Cost breakdown  +  Execution log  +  Beads issues closed</text>

  <!-- Arrow from engine to output -->
  <line x1="450" y1="610" x2="450" y2="616" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow-green)"/>
</svg>
