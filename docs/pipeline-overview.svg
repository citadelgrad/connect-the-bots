<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 620" font-family="system-ui, -apple-system, 'Segoe UI', sans-serif">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#16a34a"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc2626"/>
    </marker>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="620" rx="12" fill="#0f172a"/>

  <!-- Title -->
  <text x="450" y="42" text-anchor="middle" fill="#f1f5f9" font-size="20" font-weight="700">How Attractor Works</text>
  <text x="450" y="64" text-anchor="middle" fill="#94a3b8" font-size="13">Define AI pipelines as graphs — the engine handles execution, verification, and retries</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- LEFT COLUMN: You Write This -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="160" y="100" text-anchor="middle" fill="#38bdf8" font-size="14" font-weight="600">YOU WRITE THIS</text>

  <!-- DOT file box -->
  <rect x="30" y="115" width="260" height="200" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="50" y="140" fill="#94a3b8" font-size="11" font-weight="600">pipeline.dot</text>
  <text x="50" y="165" fill="#7dd3fc" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">digraph Build {</text>
  <text x="66" y="185" fill="#94a3b8" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">start [shape=Mdiamond]</text>
  <text x="66" y="205" fill="#fbbf24" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">code  [prompt="Write it"]</text>
  <text x="66" y="225" fill="#fbbf24" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">test  [goal_gate=true]</text>
  <text x="66" y="245" fill="#94a3b8" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">done  [shape=Msquare]</text>
  <text x="66" y="270" fill="#7dd3fc" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">start→code→test→done</text>
  <text x="66" y="290" fill="#94a3b8" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">test→code [condition=fail]</text>
  <text x="50" y="307" fill="#7dd3fc" font-size="12" font-family="'SF Mono', 'Fira Code', monospace">}</text>

  <!-- Arrow from DOT to Engine -->
  <line x1="295" y1="215" x2="345" y2="215" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="320" y="207" text-anchor="middle" fill="#64748b" font-size="10">run</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- CENTER COLUMN: Attractor Engine -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="530" y="100" text-anchor="middle" fill="#a78bfa" font-size="14" font-weight="600">ATTRACTOR ENGINE</text>

  <!-- Engine container -->
  <rect x="355" y="115" width="350" height="390" rx="10" fill="#1e293b" stroke="#6366f1" stroke-width="1.5" stroke-dasharray="6,3" filter="url(#shadow)"/>

  <!-- Phase 1: Validate -->
  <rect x="380" y="130" width="300" height="44" rx="6" fill="#312e81" stroke="#6366f1" stroke-width="1"/>
  <text x="395" y="148" fill="#c4b5fd" font-size="10" font-weight="600">PHASE 1</text>
  <text x="395" y="165" fill="#e0e7ff" font-size="13" font-weight="500">Validate — 12 lint rules before any LLM call</text>

  <!-- Arrow -->
  <line x1="530" y1="178" x2="530" y2="195" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Phase 2: Execute node -->
  <rect x="380" y="200" width="300" height="60" rx="6" fill="#1a2332" stroke="#334155" stroke-width="1"/>
  <text x="395" y="218" fill="#94a3b8" font-size="10" font-weight="600">PHASE 2</text>
  <text x="395" y="237" fill="#e2e8f0" font-size="13" font-weight="500">Execute Node → Claude Code</text>
  <text x="395" y="253" fill="#64748b" font-size="11">claude -p "prompt" --output-format json</text>

  <!-- Arrow -->
  <line x1="530" y1="264" x2="530" y2="281" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Phase 3: Verify outcome -->
  <rect x="380" y="286" width="300" height="52" rx="6" fill="#14532d" stroke="#16a34a" stroke-width="1"/>
  <text x="395" y="304" fill="#86efac" font-size="10" font-weight="600">PHASE 3</text>
  <text x="395" y="321" fill="#dcfce7" font-size="13" font-weight="500">Verify — schema + goal gates + routing</text>
  <text x="395" y="333" fill="#4ade80" font-size="10">outcome → context updates → edge selection</text>

  <!-- Branch: Success arrow -->
  <line x1="530" y1="342" x2="530" y2="365" stroke="#16a34a" stroke-width="1.5" marker-end="url(#arrow-green)"/>
  <text x="545" y="358" fill="#4ade80" font-size="10">pass</text>

  <!-- Branch: Fail arrow (loops back) -->
  <path d="M 380 312 L 360 312 L 360 230 L 376 230" stroke="#dc2626" stroke-width="1.5" fill="none" marker-end="url(#arrow-red)" stroke-dasharray="5,3"/>
  <text x="346" y="275" fill="#f87171" font-size="10" transform="rotate(-90, 346, 275)">retry</text>

  <!-- Phase 4: Next node or exit -->
  <rect x="380" y="370" width="300" height="44" rx="6" fill="#1a2332" stroke="#334155" stroke-width="1"/>
  <text x="395" y="388" fill="#94a3b8" font-size="10" font-weight="600">PHASE 4</text>
  <text x="395" y="405" fill="#e2e8f0" font-size="13" font-weight="500">Route → next node or exit pipeline</text>

  <!-- Arrow to next node loop -->
  <path d="M 684 390 L 710 390 L 710 230 L 684 230" stroke="#64748b" stroke-width="1.5" fill="none" marker-end="url(#arrow)" stroke-dasharray="5,3"/>
  <text x="724" y="315" fill="#94a3b8" font-size="10" transform="rotate(-90, 724, 315)">next node</text>

  <!-- Arrow to output -->
  <line x1="530" y1="418" x2="530" y2="445" stroke="#16a34a" stroke-width="1.5" marker-end="url(#arrow-green)"/>
  <text x="545" y="436" fill="#4ade80" font-size="10">done</text>

  <!-- Phase 5: Finalize -->
  <rect x="380" y="450" width="300" height="44" rx="6" fill="#312e81" stroke="#6366f1" stroke-width="1"/>
  <text x="395" y="468" fill="#c4b5fd" font-size="10" font-weight="600">PHASE 5</text>
  <text x="395" y="485" fill="#e0e7ff" font-size="13" font-weight="500">Finalize — cost report + context snapshot</text>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- RIGHT COLUMN: What You Get -->
  <!-- ═══════════════════════════════════════════════ -->
  <text x="810" y="100" text-anchor="middle" fill="#4ade80" font-size="14" font-weight="600">YOU GET</text>

  <!-- Output boxes -->
  <rect x="740" y="115" width="140" height="38" rx="6" fill="#14532d" stroke="#16a34a" stroke-width="1"/>
  <text x="810" y="139" text-anchor="middle" fill="#dcfce7" font-size="12" font-weight="500">Verified Output</text>

  <rect x="740" y="163" width="140" height="38" rx="6" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="810" y="187" text-anchor="middle" fill="#e2e8f0" font-size="12" font-weight="500">Cost Breakdown</text>

  <rect x="740" y="211" width="140" height="38" rx="6" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="810" y="235" text-anchor="middle" fill="#e2e8f0" font-size="12" font-weight="500">Execution Log</text>

  <rect x="740" y="259" width="140" height="38" rx="6" fill="#1e293b" stroke="#334155" stroke-width="1"/>
  <text x="810" y="283" text-anchor="middle" fill="#e2e8f0" font-size="12" font-weight="500">Context State</text>

  <!-- Arrow from engine to output -->
  <line x1="709" y1="134" x2="736" y2="134" stroke="#16a34a" stroke-width="2" marker-end="url(#arrow-green)"/>

  <!-- ═══════════════════════════════════════════════ -->
  <!-- BOTTOM: Key Value Props -->
  <!-- ═══════════════════════════════════════════════ -->
  <rect x="30" y="530" width="840" height="72" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1"/>

  <!-- Value prop items -->
  <circle cx="80" cy="560" r="16" fill="#312e81"/>
  <text x="80" y="564" text-anchor="middle" fill="#c4b5fd" font-size="14" font-weight="700">1</text>
  <text x="108" y="556" fill="#e2e8f0" font-size="12" font-weight="600">Self-Correcting</text>
  <text x="108" y="572" fill="#94a3b8" font-size="11">Failed nodes retry automatically</text>

  <circle cx="310" cy="560" r="16" fill="#312e81"/>
  <text x="310" y="564" text-anchor="middle" fill="#c4b5fd" font-size="14" font-weight="700">2</text>
  <text x="338" y="556" fill="#e2e8f0" font-size="12" font-weight="600">Quality Gated</text>
  <text x="338" y="572" fill="#94a3b8" font-size="11">Goal gates enforce standards</text>

  <circle cx="530" cy="560" r="16" fill="#312e81"/>
  <text x="530" y="564" text-anchor="middle" fill="#c4b5fd" font-size="14" font-weight="700">3</text>
  <text x="558" y="556" fill="#e2e8f0" font-size="12" font-weight="600">Cost Controlled</text>
  <text x="558" y="572" fill="#94a3b8" font-size="11">Budget + step limits per run</text>

  <circle cx="740" cy="560" r="16" fill="#312e81"/>
  <text x="740" y="564" text-anchor="middle" fill="#c4b5fd" font-size="14" font-weight="700">4</text>
  <text x="768" y="556" fill="#e2e8f0" font-size="12" font-weight="600">Resumable</text>
  <text x="768" y="572" fill="#94a3b8" font-size="11">Checkpoint mid-execution</text>
</svg>
